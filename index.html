<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æ”¾ç½®ãƒã‚¤ãƒ³ãƒˆDX</title>
<style>
body{font-family:system-ui;background:#f5f6fa;text-align:center;padding:20px}
.card{background:#fff;border-radius:12px;padding:16px;margin:12px auto;max-width:420px;box-shadow:0 4px 14px #0001}
.pt{font-size:3em;font-weight:800}
button{padding:10px 14px;margin:6px;border:0;border-radius:8px;cursor:pointer}
button:disabled{opacity:.4;cursor:not-allowed}
.shop button{width:90%}
.stat{font-size:.9em;color:#555}
.bar{width:90%;height:14px;background:#ddd;border-radius:7px;margin:8px auto;overflow:hidden}
.bar>div{height:100%;background:linear-gradient(90deg,#4caf50,#81c784)}
.small{font-size:.8em;color:#666}
.ok{color:#2e7d32}
.warn{color:#c62828}
</style>
</head>
<body>

<div class="card">
<h1>æ”¾ç½®ãƒã‚¤ãƒ³ãƒˆDX</h1>
<div class="pt"><span id="pt">0</span>pt</div>
<div>Lv.<span id="lv">1</span></div>
<div class="bar"><div id="bar"></div></div>
<div class="small">æ¬¡Lvã¾ã§ <span id="next">0</span>pt</div>
</div>

<div class="card">
<h2>ğŸ“ˆ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
<div class="stat">åŸºæœ¬ï¼š100 pt/sec</div>
<div class="stat">å¸¸æ™‚å€ç‡ï¼š<span id="perm">1.00</span>x</div>
<div class="stat">ãƒ–ãƒ¼ã‚¹ãƒˆï¼š<span id="boost">ãªã—</span></div>
<div class="stat">ç·ç²å¾—ptï¼š<span id="total">0</span></div>
</div>

<div class="card shop">
<h2>ğŸ›’ ã‚·ãƒ§ãƒƒãƒ—</h2>

<button id="b15" onclick="buyBoost(1.5,30000,10000)">
ğŸš€ 1.5å€ï¼ˆ30ç§’ï¼‰<br><b>10,000pt</b>
</button>

<button id="b2" onclick="buyBoost(2,15000,25000)">
âš¡ 2å€ï¼ˆ15ç§’ï¼‰<br><b>25,000pt</b>
</button>

<button onclick="buyPerm(1.2,50000)">
â« å¸¸æ™‚ +20%<br><b>50,000pt</b>
</button>

<button onclick="buyPerm(1.5,200000)">
ğŸ’ å¸¸æ™‚ +50%<br><b>200,000pt</b>
</button>

<button onclick="daily()">ğŸ ãƒ‡ã‚¤ãƒªãƒ¼ï¼ˆ+5,000ptï¼‰</button>
</div>

<div class="card">
<h2>ğŸ”„ è»¢ç”Ÿ</h2>
<p class="small">Lv10ä»¥ä¸Šã§å¯èƒ½</p>
<button onclick="rebirth()">âœ¨ è»¢ç”Ÿï¼ˆå¸¸æ™‚å€ç‡+10%ï¼‰</button>
</div>

<div class="card">
<h2>ğŸ† å®Ÿç¸¾</h2>
<div id="ach"></div>
</div>

<p id="info" class="small"></p>

<script>
/* ===== DOM ===== */
const ptEl=pt,lvEl=lv,barEl=bar,nextEl=next;
const permEl=perm,boostEl=boost,totalEl=total,infoEl=info,achEl=ach;

/* ===== è¨­å®š ===== */
const BASE=100;
const K={p:"p",t:"t",b:"b",m:"m",d:"d",tot:"tot",rb:"rb"};
let point=+localStorage.getItem(K.p)||0;
let total=+localStorage.getItem(K.tot)||point;
let last=+localStorage.getItem(K.t)||Date.now();
let boostUntil=+localStorage.getItem(K.b)||0;
let permMul=+localStorage.getItem(K.m)||1;
let dailyLast=+localStorage.getItem(K.d)||0;
let rebirthCount=+localStorage.getItem(K.rb)||0;
let boostMul=1;

/* ===== ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ ===== */
point+=Math.floor((Date.now()-last)/1000)*BASE;

/* ===== ãƒ¬ãƒ™ãƒ« ===== */
const level=p=>Math.floor(Math.sqrt(p/200))+1;
const need=l=>l*l*200;

/* ===== UI ===== */
function updateUI(){
 ptEl.textContent=Math.floor(point);
 totalEl.textContent=Math.floor(total);
 const lv=level(point);
 lvEl.textContent=lv;
 const rem=need(lv+1)-point;
 nextEl.textContent=Math.max(0,Math.floor(rem));
 barEl.style.width=Math.min(100,(1-rem/need(lv+1))*100)+"%";
 permEl.textContent=permMul.toFixed(2);
 boostEl.textContent=Date.now()<boostUntil
 ? boostMul+"x ("+Math.ceil((boostUntil-Date.now())/1000)+"s)"
 : "ãªã—";

 document.getElementById("b15").disabled=point<10000||Date.now()<boostUntil;
 document.getElementById("b2").disabled=point<25000||Date.now()<boostUntil;

 achEl.innerHTML="";
 if(total>=100000) achEl.innerHTML+="ğŸ… 10ä¸‡pté”æˆ<br>";
 if(permMul>=2) achEl.innerHTML+="ğŸ’  å¸¸æ™‚å€ç‡2å€<br>";
 if(rebirthCount>0) achEl.innerHTML+="âœ¨ è»¢ç”Ÿæ¸ˆã¿";
}

/* ===== ãƒ¬ãƒ¼ãƒˆ ===== */
const rate=()=>BASE*permMul*(Date.now()<boostUntil?boostMul:1);

/* ===== è³¼å…¥ ===== */
function buyBoost(m,t,c){
 if(point<c||Date.now()<boostUntil)return;
 point-=c;boostMul=m;boostUntil=Date.now()+t;
}
function buyPerm(m,c){
 if(point<c)return;
 point-=c;permMul*=m;
 localStorage.setItem(K.m,permMul);
}
function daily(){
 if(Date.now()-dailyLast<864e5){infoEl.textContent="ä»Šæ—¥ã¯å—å–æ¸ˆã¿";return;}
 point+=5000;dailyLast=Date.now();
 localStorage.setItem(K.d,dailyLast);
}
function rebirth(){
 if(level(point)<10)return;
 point=0;
 permMul*=1.1;
 rebirthCount++;
 localStorage.setItem(K.m,permMul);
 localStorage.setItem(K.rb,rebirthCount);
}

/* ===== ãƒ¡ã‚¤ãƒ³ ===== */
let lastF=performance.now();
function loop(n){
 const d=(n-lastF)/1000;lastF=n;
 const inc=d*rate();
 point+=inc;total+=inc;
 updateUI();requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* ===== ä¿å­˜ ===== */
setInterval(()=>{
 localStorage.setItem(K.p,Math.floor(point));
 localStorage.setItem(K.tot,Math.floor(total));
 localStorage.setItem(K.t,Date.now());
 localStorage.setItem(K.b,boostUntil);
},5000);

updateUI();
</script>
</body>
</html>
